---
title: 测试
date: 2022-02-08 22:04:21
tags: 其他
mathjax: true
---

### 向量

这里面首先有“向量”这个概念。既有大小又有方向的量称为向量。但是在 OI 中除了 FFT 好像都可以只用坐标表示向量。向量记作 $\vec{a}$ 或 $\mathbf{a}$。

比如一个二维向量，就可以表示为 $(a,b)$ 的样子。就相当于变化量。当然向量也有多维的，于是 vector 就出现了。一个 $n$  维的向量可以用 $(a_1,a_2,\cdots,a_n)$  表示。用坐标理解这个东西可能好理解些。零向量没有大小，自然也不确定方向，相当于一个点，用 $\mathbf{0}$ 表示，其 $n$ 维坐标都是 $0$。

向量是可以相加的，变化量可以在这里体现。比如  $\mathbf{a+b}=(a_1+b_1,a_2+b_2,\cdots,a_n+b_n)$，就是每一维相加。相减类似，也是每一维相减，可以理解为 $\mathbf{a+(-b)}$。加的几何意义就是从原点开始按照 $\mathbf{a}$ 平移之后再按照 $\mathbf{b}$  平移。比如一个点 $(x,y)$ 按二维向量 $(a_1,a_2)$ 平移后就会变成  $(x+a_1,y+a_2)$。这个东西可能有图更好理解些……但不好弄（。可以自己画几个图感受一下（，我不太会说（。不过这东西高中会学的。

向量还可以数乘，就是直接放大一些倍。$k\mathbf{a}=(ka_1,ka_2,\cdots,ka_n)$，然后方向就可能相反，也可能和原来一样。

两个向量共线就是说这两个线段平行（向量是可以任意平移的，就和线段一样，端点变了但是大小方向不变也是一个向量），用数乘表示就是两个非零向量  $\mathbf{a}$ 与 $\mathbf{b}$ 共线 $\iff$ 有唯一实数 $k$，使得  $k\mathbf{a}=\mathbf{b}$。

向量的模就是向量的长度也就是向量的大小（明明是一个东西但它就是有一堆词），用 $|\mathbf{a}|$  表示。$|\mathbf{a}|=\sqrt{a_1^2+a_2^2+\cdots+a_n^2}$。（如果我没想错的话。不过这就是两点间距离公式，应该还好，会勾股定理就能推出来）。

（我为啥说了一堆没用的东西（，接下来才是有用的（

### 矩阵及快速幂矩阵的设计

还有一个东西，叫矩阵。

$$\begin{bmatrix}a_{1,1}&\cdots&a_{1,m}\\\vdots&\ddots&\vdots\\a_{n,1}&\cdots&a_{n,m}\end{bmatrix}$$

这是一个 $n$ 行 $m$ 列的矩阵，你可以当它是一个二维数组。这里我用 $A_n$ 表示 $A$ 的行数，$A_m$ 表示 $A$ 的列数，$A_{i,j}$ 表示 $A$ 中第 $i$ 行第 $j$ 列的元素。

矩阵的加减要求 $A_n=B_n,A_m=B_m$，即运算的两个矩阵行数和列数相等，然后逐个元素进行。

矩阵的乘法要求 $A_m=B_n$，即第一个矩阵的列数等于第二个矩阵的行数。然后，设结果为 $C$，那么  $C_{i,j}=\sum_{k=1}^{A_m}A_{i,k}B_{k,j}$。显然  $C_n=A_n,C_m=B_m$。通俗的讲，在矩阵乘法中，$C$ 矩阵的第 $i$ 行第 $j$ 列的数，就是由 $A$ 第 $i$ 行的  $A_m$ 个数与 $B$ 第 $j$ 列的 $A_m$ 个数分别相乘再相加得到的。矩阵乘法没有交换律，但满足结合律。

接下来是用处，矩阵加速递推。有一个递推式，其中 $k_i$ 给定：

$$\large{f_i=k_1f_{i-2}+ k_2g_{i-1}+k_3f_{i-1},g_{i}=k_4g_{i-2}+k_5g_{i-1}+k_6f_{i-2}}$$

于是思考将它优化至 $\mathrm{O}(\log n)$。我们需要构造一个初始矩阵 $A_2$ 和一个转移矩阵 $B$。$A_i$  需要包含 $f_i,f_{i-1},g_{i},g_{i-1}$，可以写做  $$\begin{bmatrix}f_i&f_{i-1}&g_i&g_{i-1}\end{bmatrix}$$。而  $B$ 需要将 $A_{i-1}$ 转移到 $A_i$，可以写做：

$$\begin{bmatrix}k_3&1&0&0\\k_1&0&k_6&0\\k_2&0&k_5&1\\0&0&k_4&0\end{bmatrix}$$

然后答案矩阵为 $A_2B^{n-2}$。它可以写作 $\begin{bmatrix}f_n&f_{n-1}&g_n&g_{n-1}\end{bmatrix}$。注意可以优化的递推式只有常系数（好像是的）。快速构造的方法就是

$$\begin{bmatrix}&f_i&f_{i-1}&g_i&g_{i-1}\\f_{i-1}&&&&\\f_{i-2}&&&&\\g_{i-1}&&&&\\g_{i-2}&&&&\end{bmatrix}$$

然后往里面填数就行。左侧就是矩阵乘法中那个 $A_{i-1}$，而转移后就是上面的一行，也就是要求的 $A_i$。然后快速幂就行。

矩阵也可以表示变换，方式同上，不细说了。

例题：Luogu 板子、[NOI2011] 兔农，[NOI2021] 密码箱（还用平衡树）。好了差不多讲完了，可以写题了（？。我相信你们都能做出密码箱的x（。我相信你们也可以花亿些时间探索出兔农的性质然后过了它（
